{"title":"小米手环 5 NFC模拟加密IC卡","date":"2020-10-09T22:53:00.000Z","date_formatted":{"ll":"2020年10月9日","L":"2020/10/09","MM-DD":"10-09"},"author":"Nanzet","link":"2020/10/09/小米手环 5 NFC模拟加密IC卡","tags":["Mi Smart Band 5","NFC"],"categories":["兴趣"],"updated":"2022-11-19T15:43:12.598Z","content":"<h4 id=\"1.-前言\">1. 前言<a title=\"#1.-前言\" href=\"#1.-前言\"></a></h4>\n<p> 小米手环4是在刚出的时候买的，因为心悦它的公交卡、门禁卡、支付宝支付、切歌等功能，我就入手了一个，使用下来觉得支付宝支付的功能比较鸡肋，那块屏幕太小了，切歌就不说了（老网抑云了）基本没用过。怎么突然就入了小米5呢，刚开始看到雷总发的微博的时候，我被它的磁吸式充电和更大的屏幕吸引了，但是那时候我忍住了没买怕和小4比差不了多少，某次发现小4屏幕上多了一道划痕，强迫症不能忍:scream::scream:！买它，买它，买它！小5用了快一个月了，明显感觉表带比小4舒服很多，比较柔软的材质不过容易沾灰，戴着睡觉手腕基本无感很舒服。其实最实用的功能还是门禁卡、公交卡了，这次的小5也加入了女性健康记录功能，Nice:blush:</p>\n<p> 上班的时候刷电梯卡，手环贴上去，实测生效，方便快捷，出门必备之良品，还可以自定义表盘为自己的爱豆，哈哈哈:heart:对程序员来说，久坐提醒也很贴心，坐久了颈椎疼腰酸眼睛也酸，年纪轻轻就…唉~:broken_heart:</p>\n<p> 由于园区卡是加密的IC卡，所以需要破解才能模拟成功，支持的卡片类型如下：</p>\n<img src=\"https://raw.githubusercontent.com/Nanzet/nanzet-imgs/master/images/20201009233252.png\" style=\"zoom:50%;\" />\n<img src=\"https://raw.githubusercontent.com/Nanzet/nanzet-imgs/master/images/20201009233601.png\" style=\"zoom:50%;\" />\n<h4 id=\"2.-硬件和软件\">2. 硬件和软件<a title=\"#2.-硬件和软件\" href=\"#2.-硬件和软件\"></a></h4>\n<ul>\n<li>小米手环5 NFC版、win10 PC</li>\n<li>MifareOneTool</li>\n<li>PN532、CH340g、cuid蓝卡</li>\n</ul>\n<h4 id=\"3.-连线和驱动安装\">3. 连线和驱动安装<a title=\"#3.-连线和驱动安装\" href=\"#3.-连线和驱动安装\"></a></h4>\n<p> CH340G模块接线方式：gnd对gnd，vcc对5v，SDA对TXD，SCL对RXD，剩下的两个排针用黄色跳线帽盖上。</p>\n<img src=\"https://raw.githubusercontent.com/Nanzet/nanzet-imgs/master/images/20201009234523.png\" style=\"zoom:50%;\" />\n<p> 接好后连接到电脑，右击看下我的电脑【属性】–设备管理器–【端口】点开，看看有没有ch340驱动，有就可以打开软件使用了,如图：</p>\n<p><img src=\"https://raw.githubusercontent.com/Nanzet/nanzet-imgs/master/images/20201009234831.png\" alt=\"\" loading=\"lazy\" class=\"φbp\"></p>\n<h5 id=\"3.1-情况一\">3.1 情况一<a title=\"#3.1-情况一\" href=\"#3.1-情况一\"></a></h5>\n<p> 如没有驱动，看看其他设备里面有没有一个带感叹号的usb2.0的设备，有的话，右键更新驱动，不要选择联网更新，选择浏览计算机以查找驱动程序软件手动安装。</p>\n<h5 id=\"3.2-情况二（我遇到的是该种情况，按照下述解决）\">3.2 情况二（我遇到的是该种情况，按照下述解决）<a title=\"#3.2-情况二（我遇到的是该种情况，按照下述解决）\" href=\"#3.2-情况二（我遇到的是该种情况，按照下述解决）\"></a></h5>\n<p> 端口有ch340驱动，软件检测无NFC设备,这时只要将红色板子SDA和SCL这两个线换一下即可，其他线都不动，检测出有NFC设备，然后打开软件使用就可以了。</p>\n<h4 id=\"4.-运行mifareonetool软件，具体破解操作\">4. 运行MifareOneTool软件，具体破解操作<a title=\"#4.-运行mifareonetool软件，具体破解操作\" href=\"#4.-运行mifareonetool软件，具体破解操作\"></a></h4>\n<ul class=\"φbr\">\n<li><input type=\"checkbox\" disabled=\"\" checked=\"\"><i></i>第一步:检测链接【出现NFC设备】；</li>\n</ul>\n<p><img src=\"https://raw.githubusercontent.com/Nanzet/nanzet-imgs/master/images/20201009235536.png\" alt=\"\" loading=\"lazy\" class=\"φbp\"></p>\n<ul class=\"φbr\">\n<li><input type=\"checkbox\" disabled=\"\" checked=\"\"><i></i>第二步:将自己的卡放上后【点击扫描卡片】后【点击检测加密】（SAK值为08一般表示可解）；</li>\n</ul>\n<p><img src=\"https://raw.githubusercontent.com/Nanzet/nanzet-imgs/master/images/20201009235757.png\" alt=\"\" loading=\"lazy\" class=\"φbp\"></p>\n<ul class=\"φbr\" class=\"φbr\" class=\"φbr\" class=\"φbr\">\n<li><input type=\"checkbox\" disabled=\"\" checked=\"\"><i></i>第三步:【点击一键解原卡】等待解密过程，等待跳出对话框后保存DUMP文件，保存后将卡片拿开；</li>\n<li><input type=\"checkbox\" disabled=\"\" checked=\"\"><i></i>第四步:高级操作模式，【点击Hex编辑器】后，【点击左上角文件】，【点击打开】打开保存的解密dump文件，【点击扇区0】，复制第0块信息的前8位数，【再点击文件】-新建后【点击工具】，在【点击修改UID】，将复制的8位数替换上去，再【点击文件后另存为MFD文件】；</li>\n<li><input type=\"checkbox\" disabled=\"\" checked=\"\"><i></i>第五步:将cuid卡放上去，【点击CUID写】，选中刚保存的MFD文件，进行写入，需要写入64块才算完成，一定要显示完【成写入64/64个块】【等于0扇区已写好，接下来就是模拟了】；</li>\n<li><input type=\"checkbox\" disabled=\"\" checked=\"\"><i></i>第六步:再把cuid卡给手环模拟，模拟成功后，再将手环放到pn532模块上【可以去除表带，放表芯背面到pn532上面】，【点击扫描卡片】，页面有显示读到手环的数据【结果要显示有数据=1才可以，=0是没扫到，需要移动位置重新扫描】，再【点击CUID写】，将第一个保存的dump文件写入直到完成即可，显示63/64块即可【原理，前面已经模拟了1块进去了，所以只需63即可】；</li>\n</ul>\n<p><img src=\"https://raw.githubusercontent.com/Nanzet/nanzet-imgs/master/images/20201010000102.png\" alt=\"\" loading=\"lazy\" class=\"φbp\"></p>\n<h4 id=\"5.-测试模拟成功\">5. 测试模拟成功<a title=\"#5.-测试模拟成功\" href=\"#5.-测试模拟成功\"></a></h4>\n<img src=\"https://raw.githubusercontent.com/Nanzet/nanzet-imgs/master/images/20201010000225.png\" style=\"zoom:50%;\" />","prev":{"title":"解决打包前端文件到django后端项目中静态文件无法加载出现404的问题","link":"2020/10/11/解决打包前端文件到django后端项目中静态文件无法加载出现404的问题"},"next":{"title":"解决Navicat Premium 12远程连接数据库PostgreSQL 12报错的问题","link":"2020/09/23/解决Navicat Premium 12远程连接数据库PostgreSQL 12报错的问题"},"plink":"https://nanzet.cn/2020/10/09/小米手环 5 NFC模拟加密IC卡/","reward":true,"copyright":{"author":"Nanzet","link":"<a href=\"https://nanzet.cn/2020/10/09/小米手环 5 NFC模拟加密IC卡/\" title=\"小米手环 5 NFC模拟加密IC卡\">https://nanzet.cn/2020/10/09/小米手环 5 NFC模拟加密IC卡/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"},"reading_time":"1125 字约 8 分钟"}